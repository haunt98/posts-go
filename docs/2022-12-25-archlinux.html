<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/5.8.1/github-markdown.min.css"
      integrity="sha512-BrOPA520KmDMqieeM7XFe6a3u3Sb3F1JBaQnrIAmWg3EYrciJ+Qqe6ZcKCdfPv26rGcgTrJnZ/IdQEct8h3Zhw=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <title>haunt98 posts</title>
  </head>
  <style>
    .markdown-body {
      box-sizing: border-box;
      min-width: 200px;
      max-width: 980px;
      margin: 0 auto;
      padding: 45px;
      font-family:
        Sudo UI Var,
        Shantell Sans Normal,
        Inter,
        SF Pro,
        sans-serif;
      font-weight: 500;
    }

    .markdown-body pre {
      font-family:
        Iosevka Pacman,
        Jetbrains Mono,
        SF Mono,
        monospace;
    }

    @media (max-width: 767px) {
      .markdown-body {
        padding: 15px;
      }
    }
  </style>
  <body class="markdown-body">
    <h2>
      <a href="index.html"><code>~</code></a>
    </h2>
    <div class="markdown-heading">
      <h1 class="heading-element">Install Arch Linux</h1>
      <a
        id="user-content-install-arch-linux"
        class="anchor"
        aria-label="Permalink: Install Arch Linux"
        href="#install-arch-linux"
        ><span aria-hidden="true" class="octicon octicon-link"></span
      ></a>
    </div>
    <p>
      Install Arch Linux is thing I always want to do for my laptop/PC since I
      had my laptop in ninth grade.
    </p>
    <p>
      This is not a guide for everyone, this is just a save for myself in the
      future and for anyone who want to walk in my shoes.
    </p>
    <div class="markdown-heading">
      <h2 class="heading-element">
        <a
          href="https://wiki.archlinux.org/index.php/Installation_guide"
          rel="nofollow"
          >Installation guide</a
        >
      </h2>
      <a
        id="user-content-installation-guide"
        class="anchor"
        aria-label="Permalink: Installation guide"
        href="#installation-guide"
        ><span aria-hidden="true" class="octicon octicon-link"></span
      ></a>
    </div>
    <div class="markdown-heading">
      <h3 class="heading-element">Pre-installation</h3>
      <a
        id="user-content-pre-installation"
        class="anchor"
        aria-label="Permalink: Pre-installation"
        href="#pre-installation"
        ><span aria-hidden="true" class="octicon octicon-link"></span
      ></a>
    </div>
    <p>Check disks carefully:</p>
    <div class="highlight highlight-source-shell"><pre>lsblk</pre></div>
    <p>
      <a
        href="https://wiki.archlinux.org/index.php/USB_flash_installation_medium"
        rel="nofollow"
        >USB flash installation medium</a
      >
    </p>
    <div class="markdown-heading">
      <h4 class="heading-element">Verify the boot mode</h4>
      <a
        id="user-content-verify-the-boot-mode"
        class="anchor"
        aria-label="Permalink: Verify the boot mode"
        href="#verify-the-boot-mode"
        ><span aria-hidden="true" class="octicon octicon-link"></span
      ></a>
    </div>
    <p>Check UEFI mode:</p>
    <div class="highlight highlight-source-shell">
      <pre>cat /sys/firmware/efi/fw_platform_size
<span class="pl-c"><span class="pl-c">#</span> 64 or 32 is UEFI</span>
<span class="pl-c"><span class="pl-c">#</span> No such file or directory is BIOS</span></pre>
    </div>
    <p>
      <a
        href="https://wiki.archlinux.org/title/Unified_Extensible_Firmware_Interface/Secure_Boot#Disabling_Secure_Boot"
        rel="nofollow"
        >Unified Extensible Firmware Interface/Secure Boot/Disabling Secure
        Boot</a
      >
    </p>
    <div class="markdown-heading">
      <h4 class="heading-element">Connect to the internet</h4>
      <a
        id="user-content-connect-to-the-internet"
        class="anchor"
        aria-label="Permalink: Connect to the internet"
        href="#connect-to-the-internet"
        ><span aria-hidden="true" class="octicon octicon-link"></span
      ></a>
    </div>
    <p>
      For wifi, use
      <a href="https://wiki.archlinux.org/index.php/Iwd" rel="nofollow">iwd</a>.
    </p>
    <div class="markdown-heading">
      <h4 class="heading-element">Partition the disks</h4>
      <a
        id="user-content-partition-the-disks"
        class="anchor"
        aria-label="Permalink: Partition the disks"
        href="#partition-the-disks"
        ><span aria-hidden="true" class="octicon octicon-link"></span
      ></a>
    </div>
    <p>
      <a href="https://wiki.archlinux.org/index.php/GPT_fdisk" rel="nofollow"
        >GPT fdisk</a
      >:
    </p>
    <div class="highlight highlight-source-shell">
      <pre>cgdisk /dev/sdx</pre>
    </div>
    <ul>
      <li>
        <a
          href="https://wiki.archlinux.org/index.php/Partitioning#Partition_scheme"
          rel="nofollow"
          >Partition scheme</a
        >
      </li>
      <li>
        <a
          href="https://wiki.archlinux.org/title/EFI_system_partition"
          rel="nofollow"
          >EFI system partition</a
        >
      </li>
    </ul>
    <p>UEFI/GPT layout:</p>
    <table>
      <thead>
        <tr>
          <th>Mount point</th>
          <th>Partition</th>
          <th>Partition type</th>
          <th>Suggested size</th>
          <th>gdisk code</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code>/mnt/efi</code></td>
          <td><code>/dev/efi_system_partition</code></td>
          <td>EFI System Partition</td>
          <td>512 MiB</td>
          <td>EF00</td>
        </tr>
        <tr>
          <td><code>/mnt/boot</code></td>
          <td><code>/dev/extended_boot_loader_partition</code></td>
          <td>Extended Boot Loader Partition (XBOOTLDR)</td>
          <td>1 GiB</td>
          <td>EA00</td>
        </tr>
        <tr>
          <td><code>/mnt</code></td>
          <td><code>/dev/root_partition</code></td>
          <td>Root Partition</td>
          <td></td>
          <td>8300</td>
        </tr>
      </tbody>
    </table>
    <p>
      Why not <code>/boot/efi</code>? See
      <a
        href="https://github.com/systemd/systemd/pull/3757#issuecomment-234290236"
        >Lennart Poettering comment</a
      >.
    </p>
    <p>BIOS/GPT layout:</p>
    <table>
      <thead>
        <tr>
          <th>Mount point</th>
          <th>Partition</th>
          <th>Partition type</th>
          <th>Suggested size</th>
          <th>gdisk code</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td></td>
          <td></td>
          <td>BIOS boot partition</td>
          <td>1 MiB</td>
          <td>EF02</td>
        </tr>
        <tr>
          <td><code>/mnt</code></td>
          <td><code>/dev/root_partition</code></td>
          <td>Root Partition</td>
          <td></td>
          <td>8300</td>
        </tr>
      </tbody>
    </table>
    <p>Format:</p>
    <div class="highlight highlight-source-shell">
      <pre><span class="pl-c"><span class="pl-c">#</span> efi</span>
mkfs.fat -F32 /dev/efi_system_partition

<span class="pl-c"><span class="pl-c">#</span> boot</span>
mkfs.fat -F32 /dev/extended_boot_loader_partition

<span class="pl-c"><span class="pl-c">#</span> root</span>
mkfs.ext4 -L ROOT /dev/root_partition

<span class="pl-c"><span class="pl-c">#</span> root with btrfs (optional)</span>
mkfs.btrfs -L ROOT /dev/root_partition</pre>
    </div>
    <p>Mount:</p>
    <div class="highlight highlight-source-shell">
      <pre><span class="pl-c"><span class="pl-c">#</span> root</span>
mount /dev/root_partition /mnt

<span class="pl-c"><span class="pl-c">#</span> root with btrfs (optional)</span>
mount -o compress=zstd /dev/root_partition /mnt

<span class="pl-c"><span class="pl-c">#</span> efi</span>
mount --mkdir /dev/efi_system_partition /mnt/efi

<span class="pl-c"><span class="pl-c">#</span> boot</span>
mount --mkdir /dev/extended_boot_loader_partition /mnt/boot</pre>
    </div>
    <div class="markdown-heading">
      <h3 class="heading-element">Installation</h3>
      <a
        id="user-content-installation"
        class="anchor"
        aria-label="Permalink: Installation"
        href="#installation"
        ><span aria-hidden="true" class="octicon octicon-link"></span
      ></a>
    </div>
    <p>
      Please check
      <a href="https://wiki.archlinux.org/title/Mirrors" rel="nofollow"
        >Mirrors</a
      >
      if you have slow Internet.
    </p>
    <div class="highlight highlight-source-shell">
      <pre>pacstrap -K /mnt base linux linux-firmware

<span class="pl-c"><span class="pl-c">#</span> AMD (optional)</span>
pacstrap -K /mnt amd-ucode

<span class="pl-c"><span class="pl-c">#</span> Intel (optional)</span>
pacstrap -K /mnt intel-ucode

<span class="pl-c"><span class="pl-c">#</span> Btrfs (optional)</span>
pacstrap -K /mnt btrfs-progs

<span class="pl-c"><span class="pl-c">#</span> Text editor</span>
pacstrap -K /mnt neovim</pre>
    </div>
    <div class="markdown-heading">
      <h3 class="heading-element">Configure</h3>
      <a
        id="user-content-configure"
        class="anchor"
        aria-label="Permalink: Configure"
        href="#configure"
        ><span aria-hidden="true" class="octicon octicon-link"></span
      ></a>
    </div>
    <div class="markdown-heading">
      <h4 class="heading-element">
        <a href="https://wiki.archlinux.org/index.php/Fstab" rel="nofollow"
          >fstab</a
        >
      </h4>
      <a
        id="user-content-fstab"
        class="anchor"
        aria-label="Permalink: fstab"
        href="#fstab"
        ><span aria-hidden="true" class="octicon octicon-link"></span
      ></a>
    </div>
    <div class="highlight highlight-source-shell">
      <pre>genfstab -U /mnt <span class="pl-k">&gt;&gt;</span> /mnt/etc/fstab</pre>
    </div>
    <div class="markdown-heading">
      <h4 class="heading-element">Chroot</h4>
      <a
        id="user-content-chroot"
        class="anchor"
        aria-label="Permalink: Chroot"
        href="#chroot"
        ><span aria-hidden="true" class="octicon octicon-link"></span
      ></a>
    </div>
    <div class="highlight highlight-source-shell">
      <pre>arch-chroot /mnt</pre>
    </div>
    <div class="markdown-heading">
      <h4 class="heading-element">Time</h4>
      <a
        id="user-content-time"
        class="anchor"
        aria-label="Permalink: Time"
        href="#time"
        ><span aria-hidden="true" class="octicon octicon-link"></span
      ></a>
    </div>
    <div class="highlight highlight-source-shell">
      <pre><span class="pl-c"><span class="pl-c">#</span> Change Region/City to your location</span>
ln -sf /usr/share/zoneinfo/Region/City /etc/localtime

hwclock --systohc</pre>
    </div>
    <div class="markdown-heading">
      <h4 class="heading-element">Localization</h4>
      <a
        id="user-content-localization"
        class="anchor"
        aria-label="Permalink: Localization"
        href="#localization"
        ><span aria-hidden="true" class="octicon octicon-link"></span
      ></a>
    </div>
    <p>
      Edit <code>/etc/locale.gen</code> then uncomment
      <code># en_US.UTF-8 UTF-8</code> by removing <code>#</code> at the
      beginning.
    </p>
    <p>Generate locales:</p>
    <div class="highlight highlight-source-shell"><pre>locale-gen</pre></div>
    <p>Edit <code>/etc/locale.conf</code>:</p>
    <div class="highlight highlight-text-adblock">
      <pre>LANG=en_US.UTF-8</pre>
    </div>
    <div class="markdown-heading">
      <h4 class="heading-element">Network configuration</h4>
      <a
        id="user-content-network-configuration"
        class="anchor"
        aria-label="Permalink: Network configuration"
        href="#network-configuration"
        ><span aria-hidden="true" class="octicon octicon-link"></span
      ></a>
    </div>
    <p>Edit <code>/etc/hostname</code>:</p>
    <div class="highlight highlight-text-adblock"><pre>myhostname</pre></div>
    <div class="markdown-heading">
      <h4 class="heading-element">Initramfs</h4>
      <a
        id="user-content-initramfs"
        class="anchor"
        aria-label="Permalink: Initramfs"
        href="#initramfs"
        ><span aria-hidden="true" class="octicon octicon-link"></span
      ></a>
    </div>
    <p>Edit <code>/etc/mkinitcpio.conf</code>:</p>
    <div class="highlight highlight-text-adblock">
      <pre><span class="pl-c"># https://wiki.archlinux.org/title/mkinitcpio#Common_hooks</span>
<span class="pl-c"># Replace base udev with systemd</span>
<span class="pl-c">#</span>
HOOKS=(systemd ... )</pre>
    </div>
    <div class="highlight highlight-source-shell"><pre>mkinitcpio -P</pre></div>
    <div class="markdown-heading">
      <h4 class="heading-element">Root password</h4>
      <a
        id="user-content-root-password"
        class="anchor"
        aria-label="Permalink: Root password"
        href="#root-password"
        ><span aria-hidden="true" class="octicon octicon-link"></span
      ></a>
    </div>
    <div class="highlight highlight-source-shell"><pre>passwd</pre></div>
    <div class="markdown-heading">
      <h4 class="heading-element">
        <a href="https://wiki.archlinux.org/title/NetworkManager" rel="nofollow"
          >NetworkManager</a
        >
      </h4>
      <a
        id="user-content-networkmanager"
        class="anchor"
        aria-label="Permalink: NetworkManager"
        href="#networkmanager"
        ><span aria-hidden="true" class="octicon octicon-link"></span
      ></a>
    </div>
    <div class="highlight highlight-source-shell">
      <pre>pacman -Syu networkmanager iwd
systemctl <span class="pl-c1">enable</span> NetworkManager.service
systemctl <span class="pl-c1">enable</span> systemd-resolved.service</pre>
    </div>
    <p>Edit <code>/etc/NetworkManager/conf.d/wifi_backend.conf</code>:</p>
    <div class="highlight highlight-text-adblock">
      <pre>[<span class="pl-ii">device</span>]
wifi.backend=iwd</pre>
    </div>
    <p>Edit <code>/etc/NetworkManager/conf.d/dns.conf</code>:</p>
    <div class="highlight highlight-text-adblock">
      <pre>[<span class="pl-ii">main</span>]
dns=systemd-resolved</pre>
    </div>
    <div class="markdown-heading">
      <h4 class="heading-element">
        <a href="https://wiki.archlinux.org/title/Bluetooth" rel="nofollow"
          >Bluetooth</a
        >
      </h4>
      <a
        id="user-content-bluetooth"
        class="anchor"
        aria-label="Permalink: Bluetooth"
        href="#bluetooth"
        ><span aria-hidden="true" class="octicon octicon-link"></span
      ></a>
    </div>
    <div class="highlight highlight-source-shell">
      <pre>pacman -Syu bluez
systemctl <span class="pl-c1">enable</span> bluetooth.service</pre>
    </div>
    <div class="markdown-heading">
      <h4 class="heading-element">Clock</h4>
      <a
        id="user-content-clock"
        class="anchor"
        aria-label="Permalink: Clock"
        href="#clock"
        ><span aria-hidden="true" class="octicon octicon-link"></span
      ></a>
    </div>
    <p>
      Use
      <a
        href="https://wiki.archlinux.org/title/Systemd-timesyncd"
        rel="nofollow"
        >systemd-timesyncd</a
      >
    </p>
    <div class="highlight highlight-source-shell">
      <pre>timedatectl set-ntp <span class="pl-c1">true</span>

timedatectl status</pre>
    </div>
    <div class="markdown-heading">
      <h4 class="heading-element">Boot loader</h4>
      <a
        id="user-content-boot-loader"
        class="anchor"
        aria-label="Permalink: Boot loader"
        href="#boot-loader"
        ><span aria-hidden="true" class="octicon octicon-link"></span
      ></a>
    </div>
    <p>
      Use
      <a href="https://wiki.archlinux.org/index.php/Systemd-boot" rel="nofollow"
        >systemd-boot</a
      >
    </p>
    <p>Install using XBOOTLDR:</p>
    <div class="highlight highlight-source-shell">
      <pre>bootctl --esp-path=/efi --boot-path=/boot install

systemctl <span class="pl-c1">enable</span> systemd-boot-update.service</pre>
    </div>
    <p>
      <a
        href="https://wiki.archlinux.org/index.php/persistent_block_device_naming#by-label"
        rel="nofollow"
        >Label partition</a
      >
    </p>
    <p>Edit <code>/efi/loader/loader.conf</code>:</p>
    <div class="highlight highlight-text-adblock">
      <pre>
default	archlinux.conf
timeout 4
editor no
console-mode max</pre
      >
    </div>
    <ul>
      <li>
        <a
          href="https://wiki.archlinux.org/index.php/Silent_boot"
          rel="nofollow"
          >Silent boot</a
        >
      </li>
      <li>
        <a
          href="https://wiki.archlinux.org/title/Improving_performance#Watchdogs"
          rel="nofollow"
          >Improving performance/Watchdogs</a
        >
      </li>
      <li>
        <a
          href="https://wiki.archlinux.org/title/IPv6#Disable_IPv6"
          rel="nofollow"
          >IPv6/Disable IPv6</a
        >
      </li>
      <li>
        <a href="https://lwn.net/Articles/791380/" rel="nofollow"
          >add init_on_alloc/init_on_free boot options</a
        >
      </li>
      <li>
        <a href="https://lwn.net/Articles/776228/" rel="nofollow"
          >mm: Randomize free memory</a
        >
      </li>
      <li>
        <a href="https://lwn.net/Articles/925941/" rel="nofollow"
          >mm: introduce Designated Movable Blocks</a
        >
      </li>
    </ul>
    <p>Edit <code>/boot/loader/entries/archlinux.conf</code>:</p>
    <div class="highlight highlight-text-adblock">
      <pre>title Arch Linux
linux /vmlinuz-linux

<span class="pl-c"># Intel (optional)</span>
initrd /intel-ucode.img

<span class="pl-c"># AMD (optional)</span>
initrd /amd-ucode.img

initrd /initramfs-linux.img

<span class="pl-c"># Kernel parameters (optional)</span>
<span class="pl-c">#</span>
<span class="pl-c"># Acer Nitro AN515-45</span>
<span class="pl-c"># https://wiki.archlinux.org/title/backlight#Kernel_command-line_options</span>
<span class="pl-c"># acpi_backlight=vendor</span>
<span class="pl-c">#</span>
<span class="pl-c"># NVIDIA</span>
<span class="pl-c"># https://wiki.archlinux.org/title/NVIDIA#DRM_kernel_mode_setting</span>
<span class="pl-c"># nvidia-drm.modeset=1</span>
<span class="pl-c">#</span>
options root="LABEL=ROOT" rw quiet loglevel=3 nowatchdog module_blacklist=iTCO_wdt,sp5100_tco ipv6.disable=1 init_on_alloc=1 init_on_free=1 page_alloc.shuffle=1</pre>
    </div>
    <div class="markdown-heading">
      <h2 class="heading-element">
        <a
          href="https://wiki.archlinux.org/index.php/General_recommendations"
          rel="nofollow"
          >General recommendations</a
        >
      </h2>
      <a
        id="user-content-general-recommendations"
        class="anchor"
        aria-label="Permalink: General recommendations"
        href="#general-recommendations"
        ><span aria-hidden="true" class="octicon octicon-link"></span
      ></a>
    </div>
    <p>
      Always remember to check <strong>dependencies</strong> when install
      packages.
    </p>
    <div class="markdown-heading">
      <h3 class="heading-element">System administration</h3>
      <a
        id="user-content-system-administration"
        class="anchor"
        aria-label="Permalink: System administration"
        href="#system-administration"
        ><span aria-hidden="true" class="octicon octicon-link"></span
      ></a>
    </div>
    <p>
      <a href="https://wiki.archlinux.org/index.php/sudo" rel="nofollow">Sudo</a
      >:
    </p>
    <div class="highlight highlight-source-shell">
      <pre>pacman -Syu sudo zsh

EDITOR=nvim visudo
<span class="pl-c"><span class="pl-c">#</span> Uncomment group wheel</span>

<span class="pl-c"><span class="pl-c">#</span> Add user if don't want to use systemd-homed</span>
useradd -m -G wheel -s /usr/bin/zsh joker

<span class="pl-c"><span class="pl-c">#</span> Set password</span>
passwd joker</pre>
    </div>
    <ul>
      <li>
        <a
          href="https://wiki.archlinux.org/index.php/Systemd-homed"
          rel="nofollow"
          >systemd-homed (optional if no useradd before)</a
        >:
      </li>
      <li>
        <a href="https://systemd.io/HOME_DIRECTORY/" rel="nofollow"
          >Home Directories</a
        >
      </li>
    </ul>
    <div class="highlight highlight-source-shell">
      <pre>systemctl <span class="pl-c1">enable</span> systemd-homed.service
homectl create joker --shell=/usr/bin/zsh --member-of=wheel</pre>
    </div>
    <p>
      <strong>Note</strong>: Can not run <code>homectl</code> when install Arch
      Linux. Should run on the first boot.
    </p>
    <div class="markdown-heading">
      <h3 class="heading-element">Desktop Environment</h3>
      <a
        id="user-content-desktop-environment"
        class="anchor"
        aria-label="Permalink: Desktop Environment"
        href="#desktop-environment"
        ><span aria-hidden="true" class="octicon octicon-link"></span
      ></a>
    </div>
    <div class="markdown-heading">
      <h4 class="heading-element">
        <a href="https://wiki.archlinux.org/title/KDE" rel="nofollow">KDE</a>
      </h4>
      <a
        id="user-content-kde"
        class="anchor"
        aria-label="Permalink: KDE"
        href="#kde"
        ><span aria-hidden="true" class="octicon octicon-link"></span
      ></a>
    </div>
    <p>
      See
      <a
        href="https://community.kde.org/Distributions/Packaging_Recommendations"
        rel="nofollow"
        >KDE Distributions/Packaging Recommendations</a
      >
    </p>
    <div class="highlight highlight-source-shell">
      <pre>pacman -Syu plasma-desktop

<span class="pl-c"><span class="pl-c">#</span> Login manager</span>
pacman -Syu sddm</pre>
    </div>
    <div class="markdown-heading">
      <h2 class="heading-element">
        <a
          href="https://wiki.archlinux.org/index.php/List_of_applications"
          rel="nofollow"
          >List of applications</a
        >
      </h2>
      <a
        id="user-content-list-of-applications"
        class="anchor"
        aria-label="Permalink: List of applications"
        href="#list-of-applications"
        ><span aria-hidden="true" class="octicon octicon-link"></span
      ></a>
    </div>
    <div class="markdown-heading">
      <h3 class="heading-element">
        <a href="https://wiki.archlinux.org/index.php/pacman" rel="nofollow"
          >pacman</a
        >
      </h3>
      <a
        id="user-content-pacman"
        class="anchor"
        aria-label="Permalink: pacman"
        href="#pacman"
        ><span aria-hidden="true" class="octicon octicon-link"></span
      ></a>
    </div>
    <p>Uncomment in <code>/etc/pacman.conf</code>:</p>
    <div class="highlight highlight-text-adblock">
      <pre><span class="pl-c"># Misc options</span>
Color
ParallelDownloads</pre>
    </div>
    <div class="highlight highlight-source-shell">
      <pre>systemctl <span class="pl-c1">enable</span> paccache.timer</pre>
    </div>
    <div class="markdown-heading">
      <h3 class="heading-element">
        <a href="https://wiki.archlinux.org/title/PipeWire" rel="nofollow"
          >Pipewire</a
        >
      </h3>
      <a
        id="user-content-pipewire"
        class="anchor"
        aria-label="Permalink: Pipewire"
        href="#pipewire"
        ><span aria-hidden="true" class="octicon octicon-link"></span
      ></a>
    </div>
    <div class="highlight highlight-source-shell">
      <pre>
pacman -Syu pipewire wireplumber \
	pipewire-alsa pipewire-pulse</pre
      >
    </div>
    <p>
      See
      <a
        href="https://wiki.archlinux.org/title/Advanced_Linux_Sound_Architecture#Firmware"
        rel="nofollow"
        >Advanced Linux Sound Architecture/Firmware</a
      >
    </p>
    <div class="markdown-heading">
      <h3 class="heading-element">
        <a href="https://wiki.archlinux.org/title/Flatpak" rel="nofollow"
          >Flatpak</a
        >
      </h3>
      <a
        id="user-content-flatpak"
        class="anchor"
        aria-label="Permalink: Flatpak"
        href="#flatpak"
        ><span aria-hidden="true" class="octicon octicon-link"></span
      ></a>
    </div>
    <div class="highlight highlight-source-shell">
      <pre>pacman -Syu flatpak</pre>
    </div>
    <div class="markdown-heading">
      <h2 class="heading-element">
        <a
          href="https://wiki.archlinux.org/index.php/improving_performance"
          rel="nofollow"
          >Improving performance</a
        >
      </h2>
      <a
        id="user-content-improving-performance"
        class="anchor"
        aria-label="Permalink: Improving performance"
        href="#improving-performance"
        ><span aria-hidden="true" class="octicon octicon-link"></span
      ></a>
    </div>
    <ul>
      <li>
        <a
          href="https://wiki.archlinux.org/index.php/swap#Swap_file"
          rel="nofollow"
          >Swap/Swap file</a
        >
      </li>
      <li>
        <a
          href="https://wiki.archlinux.org/index.php/swap#Swappiness"
          rel="nofollow"
          >Swap/Swappiness</a
        >
      </li>
    </ul>
    <p>
      See
      <a
        href="https://wiki.archlinux.org/index.php/Systemd/Journal#Journal_size_limit"
        rel="nofollow"
        >systemd/Journal/Journal size limit</a
      >. Edit
      <code>/etc/systemd/journald.conf.d/00-journal-size.conf</code> then
      restart <code>systemd-journald.service</code>:
    </p>
    <div class="highlight highlight-text-adblock">
      <pre>[<span class="pl-ii">Journal</span>]
SystemMaxUse=50M</pre>
    </div>
    <p>
      See
      <a
        href="https://wiki.archlinux.org/index.php/Core_dump#Disabling_automatic_core_dumps"
        rel="nofollow"
        >Core dump/Disabling automatic core dumps</a
      >. Edit <code>/etc/systemd/coredump.conf.d/custom.conf</code> then
      restart:
    </p>
    <div class="highlight highlight-text-adblock">
      <pre>[<span class="pl-ii">Coredump</span>]
Storage=none
ProcessSizeMax=0</pre>
    </div>
    <ul>
      <li>
        <a
          href="https://wiki.archlinux.org/title/Ext4#Enabling_fast_commit"
          rel="nofollow"
          >Ext4/Enabling fast_commit</a
        >
      </li>
      <li>
        <a href="https://lwn.net/Articles/842385/" rel="nofollow"
          >Fast commits for ext4</a
        >
      </li>
    </ul>
    <div class="highlight highlight-source-shell">
      <pre>tune2fs -O fast_commit /dev/partition</pre>
    </div>
    <p>
      See
      <a
        href="https://wiki.archlinux.org/index.php/Solid_state_drive#Periodic_TRIM"
        rel="nofollow"
        >Solid state drive/Periodic TRIM</a
      >:
    </p>
    <div class="highlight highlight-source-shell">
      <pre>systemctl <span class="pl-c1">enable</span> fstrim.timer</pre>
    </div>
    <ul>
      <li>
        <a
          href="https://wiki.archlinux.org/title/Sysctl#Enable_TCP_Fast_Open"
          rel="nofollow"
          >sysctl/Enable TCP Fast Open</a
        >
      </li>
      <li>
        <a href="https://lwn.net/Articles/508865/" rel="nofollow"
          >TCP Fast Open: expediting web services</a
        >
      </li>
      <li>
        <a href="https://lwn.net/Articles/911219/" rel="nofollow"
          >The search for the correct amount of split-lock misery</a
        >
      </li>
    </ul>
    <p>Edit <code>/etc/sysctl.d/99-sysctl.conf</code>:</p>
    <div class="highlight highlight-text-adblock">
      <pre><span class="pl-c"># Enable TCP Fast Open</span>
net.ipv4.tcp_fastopen = 3

kernel.split_lock_mitigate = 0</pre>
    </div>
    <div class="markdown-heading">
      <h2 class="heading-element">Hardware</h2>
      <a
        id="user-content-hardware"
        class="anchor"
        aria-label="Permalink: Hardware"
        href="#hardware"
        ><span aria-hidden="true" class="octicon octicon-link"></span
      ></a>
    </div>
    <ul>
      <li>
        <a href="https://wiki.archlinux.org/title/Intel_graphics" rel="nofollow"
          >Intel graphics</a
        >
      </li>
      <li>
        <a href="https://wiki.archlinux.org/title/NVIDIA" rel="nofollow"
          >NVIDIA</a
        >
      </li>
      <li>
        <a href="https://wiki.archlinux.org/title/AMDGPU" rel="nofollow"
          >AMDGPU</a
        >
      </li>
      <li>
        <a href="https://wiki.archlinux.org/title/PRIME" rel="nofollow"
          >PRIME</a
        >
      </li>
      <li>
        <a href="https://wiki.archlinux.org/title/Laptop" rel="nofollow"
          >Laptop</a
        >
      </li>
      <li>
        <a href="https://wiki.archlinux.org/title/ASUS_Linux" rel="nofollow"
          >ASUS Linux</a
        >
      </li>
    </ul>
    <div class="markdown-heading">
      <h2 class="heading-element">Experiment</h2>
      <a
        id="user-content-experiment"
        class="anchor"
        aria-label="Permalink: Experiment"
        href="#experiment"
        ><span aria-hidden="true" class="octicon octicon-link"></span
      ></a>
    </div>
    <p>Do it at your own risk!!!</p>
    <ul>
      <li>
        <p>
          <a
            href="https://wiki.archlinux.org/title/Pacman/Pacnew_and_Pacsave"
            rel="nofollow"
            >pacman/Pacnew and Pacsave</a
          >
        </p>
      </li>
      <li>
        <p>
          <a
            href="https://wiki.archlinux.org/title/Profile-sync-daemon"
            rel="nofollow"
            >Profile-sync-daemon</a
          >
        </p>
      </li>
      <li>
        <p>
          <a href="https://github.com/sched-ext/scx"
            >https://github.com/sched-ext/scx</a
          >
        </p>
      </li>
      <li>
        <p>
          <a href="https://github.com/AdnanHodzic/auto-cpufreq"
            >https://github.com/AdnanHodzic/auto-cpufreq</a
          >
        </p>
      </li>
      <li>
        <p>
          <a href="https://github.com/nbfc-linux/nbfc-linux"
            >https://github.com/nbfc-linux/nbfc-linux</a
          >
        </p>
      </li>
      <li>
        <p>
          <a href="https://github.com/erpalma/throttled"
            >https://github.com/erpalma/throttled</a
          >
        </p>
      </li>
    </ul>

    <div>
      Feel free to ask me via
      <a href="mailto:hauvipapro+posts@gmail.com">email</a> or
      <a rel="me" href="https://hachyderm.io/@haunguyen">Mastodon</a>.
      <br />Source code is available on
      <a href="https://github.com/haunt98/posts-go">GitHub</a>
      <a href="https://codeberg.org/yoshie/posts-go">Codeberg</a>
      <a href="https://git.sr.ht/~youngyoshie/posts-go">sourcehut</a>
      <a href="https://gitea.treehouse.systems/yoshie/posts-go">Treehouse</a>
      <a href="https://gitlab.com/youngyoshie/posts-go">GitLab</a>
    </div>
  </body>
</html>
